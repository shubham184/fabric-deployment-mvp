{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "deploy-order.schema.json",
  "title": "Deployment Order Schema",
  "type": "object",
  "required": ["deployment_order", "templates"],
  "properties": {
    "deployment_order": {
      "type": "array",
      "items": {
        "type": "string",
        "enum": ["lakehouses", "pipelines", "notebooks"]
      },
      "minItems": 3,
      "maxItems": 3
    },
    "templates": {
      "type": "object",
      "required": ["lakehouses", "pipelines", "notebooks"],
      "properties": {
        "lakehouses": {
          "type": "object",
          "required": ["bronze", "silver", "gold"],
          "properties": {
            "bronze": {
              "type": "string",
              "pattern": ".*\\.json\\.tpl$"
            },
            "silver": {
              "type": "string",
              "pattern": ".*\\.json\\.tpl$"
            },
            "gold": {
              "type": "string",
              "pattern": ".*\\.json\\.tpl$"
            }
          },
          "additionalProperties": false
        },
        "pipelines": {
          "type": "object",
          "required": ["data_ingestion", "data_transformation", "data_aggregation"],
          "properties": {
            "data_ingestion": {
              "type": "string",
              "pattern": ".*\\.json\\.tpl$"
            },
            "data_transformation": {
              "type": "string",
              "pattern": ".*\\.json\\.tpl$"
            },
            "data_aggregation": {
              "type": "string",
              "pattern": ".*\\.json\\.tpl$"
            }
          },
          "additionalProperties": false
        },
        "notebooks": {
          "type": "object",
          "required": ["bronze_processing", "silver_processing", "gold_processing"],
          "properties": {
            "bronze_processing": {
              "type": "string",
              "pattern": ".*\\.ipynb\\.tpl$"
            },
            "silver_processing": {
              "type": "string",
              "pattern": ".*\\.ipynb\\.tpl$"
            },
            "gold_processing": {
              "type": "string",
              "pattern": ".*\\.ipynb\\.tpl$"
            }
          },
          "additionalProperties": false
        }
      },
      "additionalProperties": false
    }
  },
  "additionalProperties": false
}